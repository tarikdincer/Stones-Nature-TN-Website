@{

    IEnumerable<Category> categories = ViewData["Categories"] as IEnumerable<Category>;
    IEnumerable<Product> products = ViewData["Products"] as IEnumerable<Product>;
    ViewData["CurrentRoute"] = ViewData["CurrentRoute"] != null ? ViewData["CurrentRoute"] : "";
}

<header class="header-area">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <nav class="navbar navbar-expand-lg">
                        <a class="navbar-brand" asp-action="Index" asp-controller="Home">
                            <img src="/images/logo.png" alt="Logo">
                        </a> <!-- Logo -->
                        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                            <span class="bar-icon"></span>
                            <span class="bar-icon"></span>
                            <span class="bar-icon"></span>
                        </button>

                        <div class="collapse navbar-collapse" id="navbarSupportedContent">
                            <ul id="nav" class="navbar-nav ml-auto">
                                <li class="nav-item @(ViewData["CurrentRoute"] == "Home" ? "active" : "")">
                                    <a class="nav-link" asp-action="Index" asp-controller="Home">Home</a>
                                </li>
                                <li class="nav-item dropdown">
                                    <a class="nav-link dropdown-toggle no-collapse" href="#" data-bs-toggle="dropdown">Products</a>
                                    <ul class="dropdown-menu">
                                    @foreach(Category category in categories){
                                        
                                            <li><a class="dropdown-item no-collapse" asp-controller="Category" asp-action="Index" asp-route-categoryId="@category.Id"> @category.Name &raquo; </a>
                                                <ul class="submenu dropdown-menu">
                                                    @foreach(Product product in products)
                                                    {
                                                        @if(@product.CategoryId == category.Id){
                                                            <li><a class="dropdown-item" asp-controller="Product" asp-action="Index" asp-route-productId="@product.Id">@product.Name.ToUpper()</a></li>
                                                        }
                                                    }
				                                </ul>
                                            </li>
                                        
                                    }
                                    </ul>
                                    
                                </li>
                                <li class="nav-item @(ViewData["CurrentRoute"] == "Gallery" ? "active" : "")">
                                    <a class="nav-link" asp-action="Gallery" asp-controller="Home">Gallery</a>
                                </li>
                                <li class="nav-item @(ViewData["CurrentRoute"] == "About" ? "active" : "")">
                                    <a class="nav-link" asp-action="About" asp-controller="Home">About Us</a>
                                </li>
                                <li class="nav-item @(ViewData["CurrentRoute"] == "Contact" ? "active" : "")">
                                    <a class="nav-link" asp-action="Contact" asp-controller="Home">Contact</a>
                                </li>
                            </ul> <!-- navbar nav -->
                        </div>
                    </nav> <!-- navbar -->
                </div>
            </div> <!-- row -->
        </div> <!-- container -->
    </header>


